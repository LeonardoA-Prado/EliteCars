{% extends 'base.html.twig' %}

{% block title %}Edit Usuario{% endblock %}

{% block body %}
{% if app.user and (app.user.id == usuario.id or is_granted('ROLE_ADMIN')) %}
    <body class="page-signup">
        <main>
            <div class="container-small page-login">
                <div class="flex" style="gap: 5rem">
                    <div class="auth-page-form">
                        <h1 class="auth-page-title">Editar Cuenta</h1>
                        
                        {{ form_start(form, {'attr': {'class': 'auth-page-form'}}) }}
                        
                        <div class="form-group">
                            {{ form_label(form.email, 'Correo electrónico') }}
                            {{ form_widget(form.email, {'attr': {'class': 'form-control', 'placeholder': 'Ingresa tu email'}}) }}
                            {{ form_errors(form.email) }}
                        </div>
                        
                        <div class="form-group">
                            {{ form_label(form.nombre, 'Nombre') }}
                            {{ form_widget(form.nombre, {'attr': {'class': 'form-control', 'placeholder': 'Ingresa tu nombre'}}) }}
                            {{ form_errors(form.nombre) }}
                        </div>
                        
                        <div class="form-group">
                            {{ form_label(form.apellidos, 'Apellidos') }}
                            {{ form_widget(form.apellidos, {'attr': {'class': 'form-control', 'placeholder': 'Ingresa tus apellidos'}}) }}
                            {{ form_errors(form.apellidos) }}
                        </div>
                        
                        {% if form.contrasena is defined %}
                        <div class="form-group">
                            {{ form_label(form.contrasena, 'Contraseña') }}
                            {{ form_widget(form.contrasena, {'attr': {'class': 'form-control', 'placeholder': 'Ingresa tu contraseña'}}) }}
                            {{ form_errors(form.contrasena) }}
                        </div>
                        {% endif %}
                        
                        <hr />
                        <button type="submit" class="btn btn-primary btn-login w-full">Actualizar</button>
                        
                        {{ form_end(form) }}
                        
                        <div class="mt-3 text-center">
                            <a class="btn btn-secondary" href="{{ path('app_usuario_show', {'id': app.user.id}) }}">Volver</a>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </body>
{% else %}
    <div class="mb-3">
        <h3>NO TIENES PERMISOS O NO TE HAS LOGUEADO!! <a href="{{ path('app_login') }}">Volver a loguearte</a></h3>
    </div>
{% endif %}
{% endblock %}